---
import { getLanguageFromUrl, t, setCurrentLanguage } from "../i18n/utils/translator";

const currentLang = getLanguageFromUrl(Astro.url.pathname);
setCurrentLanguage(currentLang);
---

<section id="contacto" class="py-16 bg-gray-50">
  <div class="container max-w-5xl mx-auto">

    <div class="text-center mb-12">
      <span class="inline-block text-pixel-brown font-semibold text-sm uppercase tracking-wider mb-2">
        {t('contacto.badge')}
      </span>
      <h2 class="text-3xl md:text-5xl font-normal text-gray-900 mb-4">
        {t('contacto.title')}
      </h2>
      <p class="text-gray-600 text-lg max-w-2xl mx-auto">
        {t('contacto.subtitle')}
      </p>
    </div>

    <div class="bg-white rounded-2xl shadow-sm border border-gray-200 p-8">

      <h3 class="text-xl font-semibold text-gray-900 mb-4">{t('contacto.info_title')}</h3>

      <ul class="space-y-2 text-gray-700">
        <li><strong>{t('contacto.direccion_label')}</strong> Calle 98a #51-32, Bogotá</li>
        <li><strong>{t('contacto.telefono_label')}</strong> +57 319 589 5858</li>
        <li><strong>{t('contacto.email_label')}</strong> comercialpixel98a@gmail.com</li>
      </ul>

      <div class="mt-8">
        <a href="https://wa.me/573195895858" target="_blank"
           class="btn bg-pixel-brown text-white px-8 py-4 rounded-lg font-semibold hover:bg-pixel-brown/90">
          {t('contacto.cta_button')}
        </a>
      </div>

    </div>

    <div class="mt-12 text-center">
      <h3 class="text-xl font-semibold text-gray-900 mb-4">{t('contacto.ubicacion_title')}</h3>

      <a href="https://maps.app.goo.gl/pixel-living" target="_blank"
         class="inline-block bg-pixel-blue text-white px-6 py-3 rounded-lg hover:bg-blue-700">
        {t('contacto.ubicacion_boton')}
      </a>
    </div>

  </div>
</section>


<!-- Script para interactividad del mapa -->
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const mapContainer = document.getElementById('mapContainer');
    
    // Abrir Google Maps con direcciones al hacer click - DIRECCIÓN ACTUALIZADA
    mapContainer?.addEventListener('click', () => {
      const googleMapsUrl = 'https://www.google.com/maps/dir/?api=1&destination=Calle+98a+51-32,+La+Castellana,+Bogotá,+Colombia&travelmode=driving';
      window.open(googleMapsUrl, '_blank');
    });
    
    // Añadir tooltip
    mapContainer?.addEventListener('mouseenter', () => {
      mapContainer.setAttribute('title', 'Haz clic para obtener direcciones');
    });
  });
</script>

<style>
  /* Animación del pin del mapa */
  @keyframes bounce {
    0%, 20%, 53%, 80%, 100% {
      transform: translate3d(0,0,0);
    }
    40%, 43% {
      transform: translate3d(0,-12px,0);
    }
    70% {
      transform: translate3d(0,-6px,0);
    }
    90% {
      transform: translate3d(0,-3px,0);
    }
  }
  
  .animate-bounce {
    animation: bounce 2s infinite;
  }
  
  /* Parar animación al hacer hover */
  #mapContainer:hover .animate-bounce {
    animation-play-state: paused;
    transform: scale(1.1);
    transition: transform 0.3s ease;
  }
  
  /* Responsive del mapa */
  @media (max-width: 1024px) {
    #mapContainer {
      height: 250px;
    }
  }
  
  @media (max-width: 768px) {
    #mapContainer {
      height: 220px;
    }
  }
</style>