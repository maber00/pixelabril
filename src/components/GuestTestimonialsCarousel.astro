---
// src/components/GuestTestimonialsCarousel.astro

const testimonios = [
  {
    nombre: "Jacob Speth",
    rating: "⭐️⭐️⭐️⭐️⭐️",
    texto:
      "I loved staying here! The rooms are beautiful and clean, the location is fantastic, and the terrace on top is the perfect place to relax and enjoy the sounds and sights of Bogotá. Make sure to stop and stay at Pixel Living!",
  },
  {
    nombre: "Ana Prieto",
    rating: "⭐️⭐️⭐️⭐️⭐️",
    texto: "Excelente ubicación e instalaciones",
  },
  {
    nombre: "Rodolfo Álvarez Díaz",
    rating: "⭐️⭐️⭐️⭐️⭐️",
    texto: "Beautiful",
  },
  {
    nombre: "Jonathan Cárdenas",
    rating: "⭐️⭐️⭐️⭐️",
    texto: "Muy buena experiencia en Pixel Living.",
  },
  {
    nombre: "Dario García",
    rating: "⭐️⭐️⭐️⭐️⭐️",
    texto:
      "Excelente lugar, muy cómodo y bien ubicado. Perfecto para mi estadía en Bogotá.",
  },
];
---

<section id="testimonios" class="section bg-white">
  <div class="container">

    <!-- Header -->
    <div class="text-center mb-10 md:mb-14 mx-0 md:mx-20">
      <span class="inline-block text-pixel-brown font-semibold text-sm uppercase tracking-wider mb-2">
        Testimonios reales
      </span>
      <h2 class="text-3xl md:text-5xl font-normal mb-4 text-gray-900">
        Testimonios reales de huéspedes en
        <span class="text-pixel-brown">Pixel Living</span>
      </h2>
      <p class="text-base md:text-lg text-gray-600 max-w-2xl mx-auto">
        Esto es lo que dicen quienes ya se han hospedado con nosotros.
      </p>
    </div>

    <!-- Contenedor general -->
    <div class="relative">

      <!-- Flecha Izquierda -->
      <button
        id="arrow-left"
        class="hidden md:flex absolute left-0 top-1/2 -translate-y-1/2 -translate-x-4 z-10
               items-center justify-center w-10 h-10 rounded-full bg-white
               border border-gray-200 shadow-md text-pixel-brown
               hover:bg-gray-50 transition"
        aria-label="Anterior"
      >
        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="1.5">
          <path stroke-linecap="round" stroke-linejoin="round" d="M15 19L8 12l7-7" />
        </svg>
      </button>

      <!-- Flecha Derecha -->
      <button
        id="arrow-right"
        class="hidden md:flex absolute right-0 top-1/2 -translate-y-1/2 translate-x-4 z-10
               items-center justify-center w-10 h-10 rounded-full bg-white
               border border-gray-200 shadow-md text-pixel-brown
               hover:bg-gray-50 transition"
        aria-label="Siguiente"
      >
        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="1.5">
          <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
        </svg>
      </button>

      <!-- Carrusel -->
      <div
        id="carousel"
        class="flex gap-5 md:gap-6 overflow-x-auto scroll-smooth pb-4 snap-x snap-mandatory
               scrollbar-thin scrollbar-track-transparent scrollbar-thumb-pixel-brown/30"
      >
        {testimonios.map((t) => (
          <article
            class="snap-start shrink-0 w-[270px] sm:w-[310px] md:w-[350px]
                   bg-pixel-brown/5 border border-pixel-brown/10 rounded-2xl
                   px-5 py-6 md:px-6 md:py-7 shadow-sm hover:shadow-md transition"
          >
            <!-- rating -->
            <div class="flex items-center justify-between gap-3 mb-4">
              <span class="text-sm text-pixel-brown">{t.rating}</span>

              <div class="flex items-center justify-center w-9 h-9 rounded-full bg-pixel-brown text-white text-xs font-semibold">
                {t.nombre
                  .split(" ")
                  .slice(0, 2)
                  .map((n) => n[0])
                  .join("")}
              </div>
            </div>

            <p class="text-sm md:text-base text-gray-800 mb-4 leading-relaxed">“{t.texto}”</p>

            <div>
              <p class="text-sm font-semibold text-gray-900">{t.nombre}</p>
              <p class="text-xs text-gray-500">Huésped de Pixel Living</p>
            </div>
          </article>
        ))}
      </div>

    </div>
  </div>
</section>

<script is:inline>
  const carousel = document.getElementById("carousel");
  const left = document.getElementById("arrow-left");
  const right = document.getElementById("arrow-right");

  if (carousel && left && right) {
    const cardWidth = 330; // Ajusta si las tarjetas cambian

    left.addEventListener("click", () => {
      carousel.scrollBy({ left: -cardWidth, behavior: "smooth" });
    });

    right.addEventListener("click", () => {
      carousel.scrollBy({ left: cardWidth, behavior: "smooth" });
    });
  }
</script>

<style>
  /* scrollbar minimal */
  #carousel::-webkit-scrollbar {
    height: 6px;
  }
  #carousel::-webkit-scrollbar-thumb {
    border-radius: 999px;
  }
</style>
